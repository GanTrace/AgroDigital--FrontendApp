<div class="dashboard-container">
  <app-header-component></app-header-component>
  <main class="main-content">
    <div class="welcome-section">
      <h1>Bienvenido Dr. {{ userName }}!</h1>
      <button class="add-appointment-btn" routerLink="/new-appointment">
        <span>Nueva Cita</span>
        <span class="add-icon">+</span>
      </button>
    </div>
    
    <div class="search-section">
      <div class="search-bar">
        <i class="search-icon">üîç</i>
        <input 
          type="text" 
          [(ngModel)]="searchTerm" 
          (input)="searchPatients()"
          (keyup)="searchPatients()"
          placeholder="Buscar paciente o propietario">
      </div>
      <button class="filter-btn" (click)="toggleFilters()">
        Filtrar
        <i class="filter-icon">‚â°</i>
      </button>
    </div>
    
    <div class="filter-panel" [class.show-filters]="showFilters">
      <div class="filter-header">
        <h3>Opciones de Filtro</h3>
        <button class="close-filters" (click)="toggleFilters()">√ó</button>
      </div>
      
      <div class="filter-content">
        <div class="filter-group">
          <label>Tipo de Animal</label>
          <select [(ngModel)]="selectedFilters.type">
            <option *ngFor="let type of animalTypes" [value]="type">{{ type }}</option>
          </select>
        </div>
        
        <div class="filter-actions">
          <button class="apply-btn" (click)="applyFilters()">Aplicar Filtros</button>
          <button class="reset-btn" (click)="resetFilters()">Restablecer</button>
          <button class="cancel-btn" (click)="toggleFilters()">Cancelar</button>
        </div>
      </div>
    </div>
    
    <div class="dashboard-sections">
      <section class="patients-section">
        <h2>Mis Pacientes</h2>
        
        <div class="loading" *ngIf="isLoading">
          <p>Cargando pacientes...</p>
        </div>
        
        <div class="error-message" *ngIf="loadError">
          <p>{{ loadError }}</p>
        </div>
        
        <div class="patients-grid" *ngIf="!isLoading && !loadError">
          <div class="patient-card" *ngFor="let patient of filteredPatients">
            <div class="patient-tag" [ngClass]="patient.healthIssues === 'Ninguno' ? 'status-healthy' : 'status-treatment'">
              {{ patient.healthIssues === 'Ninguno' ? 'Saludable' : 'En Tratamiento' }}
            </div>
            <div class="patient-image">
              <img [src]="patient.image" alt="{{ patient.name }}">
            </div>
            <div class="patient-name">{{ patient.name }}</div>
            <ul class="patient-details-list">
              <li>{{ patient.type }}</li>
              <li>Edad: {{ patient.age }}</li>
              <li>Propietario: {{ patient.owner }}</li>
              <li>√öltima visita: {{ patient.lastVisit }}</li>
            </ul>
            <button class="info-btn" (click)="viewPatientDetails(patient.id)">i</button>
          </div>
        </div>
        
        <div class="no-patients" *ngIf="!isLoading && !loadError && filteredPatients.length === 0">
          No hay pacientes disponibles.
        </div>
        
        <div class="view-more-container" *ngIf="patients.length > 6">
          <button class="view-more-btn" routerLink="/veterinarian/patients">Ver m√°s</button>
        </div>
      </section>
      
      <section class="appointments-section">
        <h2>Pr√≥ximas Citas</h2>
        <div class="appointments-list">
          <div class="appointment-card" *ngFor="let appointment of upcomingAppointments">
            <div class="appointment-date">
              <div class="date">{{ appointment.date }}</div>
              <div class="time">{{ appointment.time }}</div>
            </div>
            <div class="appointment-details">
              <div class="patient-name">{{ appointment.patientName }}</div>
              <div class="owner-name">Propietario: {{ appointment.ownerName }}</div>
              <div class="reason">Motivo: {{ appointment.reason }}</div>
            </div>
            <div class="appointment-actions">
              <button class="edit-btn">Editar</button>
              <button class="cancel-btn">Cancelar</button>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>
  <app-footer-component></app-footer-component>
</div>